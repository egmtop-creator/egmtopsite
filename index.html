<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Mobile 2P Shooter</title>
<style>
body { margin:0; overflow:hidden; background:#111; }
canvas { background:#1e1e1e; display:block; margin:auto; }

.controls {
    position: absolute;
    bottom: 20px;
    width: 100%;
    display: flex;
    justify-content: space-between;
    padding: 0 40px;
}

.joystick {
    width: 100px;
    height: 100px;
    background: rgba(255,255,255,0.1);
    border-radius: 50%;
    position: relative;
}

.shoot {
    width: 80px;
    height: 80px;
    background: red;
    border-radius: 50%;
    opacity: 0.7;
}
</style>
</head>
<body>

<canvas id="game" width="900" height="500"></canvas>

<div class="controls">
    <div>
        <div class="joystick" id="joy1"></div>
        <div class="shoot" id="shoot1"></div>
    </div>
    <div>
        <div class="shoot" id="shoot2"></div>
        <div class="joystick" id="joy2"></div>
    </div>
</div>

<script>
const canvas = document.getElementById("game");
const ctx = canvas.getContext("2d");

let p1 = { x:50, y:200, size:25, hp:5 };
let p2 = { x:825, y:200, size:25, hp:5 };
let bullets = [];

function shoot(player, dir){
    bullets.push({
        x: player.x + player.size/2,
        y: player.y + player.size/2,
        size:6,
        speed:6*dir,
        owner:player
    });
}

function update(){
    ctx.clearRect(0,0,900,500);

    ctx.fillStyle="orange";
    ctx.fillRect(p1.x,p1.y,p1.size,p1.size);

    ctx.fillStyle="cyan";
    ctx.fillRect(p2.x,p2.y,p2.size,p2.size);

    ctx.fillStyle="yellow";
    bullets.forEach((b,i)=>{
        b.x += b.speed;
        ctx.fillRect(b.x,b.y,b.size,b.size);

        let target = b.owner===p1 ? p2 : p1;

        if(
            b.x < target.x+target.size &&
            b.x+b.size > target.x &&
            b.y < target.y+target.size &&
            b.y+b.size > target.y
        ){
            target.hp--;
            bullets.splice(i,1);
        }

        if(b.x<0 || b.x>900) bullets.splice(i,1);
    });

    ctx.fillStyle="white";
    ctx.font="20px Arial";
    ctx.fillText("P1: "+p1.hp,20,30);
    ctx.fillText("P2: "+p2.hp,820,30);

    if(p1.hp<=0 || p2.hp<=0){
        ctx.font="40px Arial";
        ctx.fillText(p1.hp<=0?"P2 WINS":"P1 WINS",350,250);
        return;
    }

    requestAnimationFrame(update);
}

update();

// JOYSTICKS
let joy1 = document.getElementById("joy1");
let joy2 = document.getElementById("joy2");

joy1.onmousedown = e=>{
    document.onmousemove = ev=>{
        if(ev.movementY < 0) p1.y -= 5;
        if(ev.movementY > 0) p1.y += 5;
    }
};
joy2.onmousedown = e=>{
    document.onmousemove = ev=>{
        if(ev.movementY < 0) p2.y -= 5;
        if(ev.movementY > 0) p2.y += 5;
    }
};
document.onmouseup = ()=> document.onmousemove = null;

// SHOOT BUTTONS
document.getElementById("shoot1").onclick = ()=> shoot(p1,1);
document.getElementById("shoot2").onclick = ()=> shoot(p2,-1);

</script>

</body>
</html>
